---
- name: install packages (Debian)
  apt: name={{ item }} state=present
  with_items:
    - zsh
    - vim-nox
  sudo: true
  when: ansible_pkg_mgr == 'apt'

- name: download YADR
  get_url: url=https://raw.githubusercontent.com/skwp/dotfiles/master/install.sh dest=/tmp/yadr_install.sh mode=0755

- name: install YADR
  command: bash -c 'echo yes | /tmp/yadr_install.sh' creates=~/.yadr

- name: Set the user shell to zsh
  user: name={{ ansible_ssh_user }} shell=/bin/zsh
  sudo: yes

- name: Remove bogus line from .vimrc
  lineinfile: dest=~/.vimrc state=absent regexp="^set list listchars"

- lineinfile: dest=/etc/environment line='LC_ALL="en_US.ISO-8859-1"'
  sudo: true
  when: ansible_distribution == 'Debian' #and ansible_distribution_version == 'jessie/sid'

- name: copy environment (Debian)
  #copy: src={{item}} dest=/home/{{env.user}}/{{item}} owner={{env.user}} group={{env.user}} mode=0644
  copy: src={{item}} dest=~/{{item}} # owner={{env.user}} group={{env.user}} mode=0644
  with_items:
    - '.tmux.conf.user'
    - '.vimrc.before'
